<!doctype html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdn.bootcss.com/bulma/0.6.1/css/bulma.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/layui/css/layui.css" media="all">
    <style>
        body {
            background: #f8f8f8;
        }

        .tag.is-lightblue {
            color: #2d84cc;
            background: #ebf3fb;
        }

        .ml-10 {
            margin-left: 1rem;
        }

        .lh-20 {
            line-height: 2rem;
        }

        .card {
            margin-bottom: 1rem;
        }

        .section {
            padding-top: 1rem;
        }

        .fa-15 {
            font-size: 1.5rem;
        }

        .fa.fa-fire {
            font-size: 1.2rem;
            color: red;
            margin-left: 1rem;
        }
    </style>
    <title>添加新交易</title>
</head>
<body>
<div class="navbar has-shadow">
    <div class="container">
        <div class="navbar-menu">
            <div class="navbar-start">
                <a class="navbar-item" href="/">首页</a>
                <a class="navbar-item" href="http://stock.eastmoney.com/a/cgszb.html" target="_blank">股市直播</a>
                <a class="navbar-item" href="http://finance.sina.com.cn/roll/index.d.html?cid=56589&page=1"
                   target="_blank">股市及时雨</a>
                <a class="navbar-item" href="http://stock.hexun.com/" target="_blank">和讯股评</a>
                <a class="navbar-item" href="/topic">话题</a>
                <a class="navbar-item" href="/stock/list">自选股</a>
                <a class="navbar-item" href="/invest/list">股票持仓</a>
                <div class="navbar-item">
                    <form action="/article/publish" method="get">
                        <div class="field is-grouped">

                            <div class="control has-icons-right">
                                <input type="text" class="input" name="title" style="width: 20rem;"
                                       placeholder="搜索你感兴趣的内容...">
                                <span class="icon is-right">
                                <i class="fa fa-search"></i>
                            </span>
                            </div>
                            <div class="control">
                                <input type="submit" class="button is-info" value="写心得">
                            </div>

                            <div class="control">
                                <a class=" is-info" href="/stock/add" target="_blank">添加自选股</a>
                            </div>
                            <div class="control">
                                <a class=" is-info" href="/invest/add" target="_blank">交易</a>
                                <!--<a class=" is-info" href="/stock/add" target="_blank">卖出股票</a>-->
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="navbar-end">
                <a href="#" class="navbar-item">
                    <i class="fa fa-15 fa-bell"></i>
                </a>
                <a href="#" class="navbar-item">
                    <i class="fa fa-15 fa-comments"></i>
                </a>
                <a href="#" class="navbar-item">
                    <img src="https://bulma.io/images/placeholders/128x128.png" alt="">
                </a>
            </div>
        </div>
    </div>
</div>
<div class="section">
    <div class="container">
        <div class="tile">
            <div class="tile is-vertical is-parent is-8">
                <div class="box">
                    <div class="media">
                        <blockquote class="layui-elem-quote layui-text">
                            股票投资记录，时间久了，这就是你的大数据。1. <a href="/invest/list">查看我的交易记录</a>
                        </blockquote>
                    </div>

                </div>
                <div class="box">

                    <form class="layui-form" action="">
                        <div class="layui-form-item">
                            <label class="layui-form-label" style="width: 120px;">交易类型</label>
                            <div class="layui-input-block">
                                <input type="radio" name="transaction_type" value="1" title="买入" checked="checked">
                                <input type="radio" name="transaction_type" value="2" title="卖出">

                            </div>
                        </div>

                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label" style="width: 120px;">股票代码</label>
                                <div class="layui-input-inline">
                                    <select name="code" lay-verify="required" lay-search="">
                                        <option value="">输入股票代码</option>
                                        <option th:each="item:${stock_list}" th:value="${item.code}"
                                                th:text="${item.code+item.name}">600283
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label" style="width: 120px;">交易价格</label>
                                <div class="layui-input-inline" style="width: 100px;">
                                    <input type="text" name="price" lay-verify="number|required" autocomplete="off"
                                           placeholder="￥买入价" class="layui-input">
                                </div>
                                <!--<div class="layui-form-mid">-</div>-->
                                <!--<div class="layui-input-inline" style="width: 100px;">-->
                                <!--<input type="text" name="price_cost" lay-verify="number|required" autocomplete="off" placeholder="￥成本价" class="layui-input">-->
                                <!--</div>-->
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label" style="width: 120px;">交易数量</label>
                                <div class="layui-input-inline" style="width: 100px;">
                                    <input type="text" name="count" lay-verify="number|required" autocomplete="off"
                                           placeholder="交易数量" class="layui-input">
                                </div>

                            </div>
                        </div>

                        <div class="layui-form-item">

                            <div class="layui-inline">
                                <label class="layui-form-label" style="width: 120px;">交易时间</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="transaction_date" id="date" lay-verify="datetime|required"
                                           placeholder="yyyy-MM-dd HH:mm" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                        </div>

                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label" style="width: 120px;">交易策略</label>
                                <div class="layui-input-inline">
                                    <select name="strategy" lay-verify="required" lay-search="">
                                        <option value="短线交易(持股1周-10%--20%)">短线交易(持股1周-10%--20%)</option>
                                        <option value="中短线持有(持有1个月)">中短线持有(持有1个月)</option>
                                        <option value="中线持有(持有2个月)">中线持有(持有2个月)</option>
                                        <option value="中线持有(持有3个月)">中线持有(持有3个月)</option>
                                        <option value="长线持有(持有半年)">长线持有(持有半年)</option>
                                        <option value="长线持有(持有一年)">长线持有(持有一年)</option>
                                        <option value="长线持有(持有更长)">长线持有(持有更长)</option>

                                    </select>
                                    <!--<input type="text" name="sell_drop_rate" autocomplete="off" lay-verify="number|required" placeholder="-10%"  class="layui-input">-->
                                </div>
                                <!--<div class="layui-form-mid">-</div>-->
                                <!--<div class="layui-input-inline" style="width: 100px;">-->
                                <!--<input type="text" name="sell_up_rate" autocomplete="off" lay-verify="number|required" placeholder="+30%" class="layui-input">-->
                                <!--</div>-->
                            </div>
                        </div>

                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label" style="width: 120px;">交易备注</label>
                            <div class="layui-input-block">
                                <textarea placeholder="请输入交易备注" name="comment" class="layui-textarea"></textarea>
                            </div>
                        </div>

                        <div class="layui-form-item">
                            <div class="layui-input-block">
                                <button class="layui-btn" lay-submit="" lay-filter="demo1">立即添加</button>
                                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="tile is-vertical is-parent">
                <div class="card">
                    <div class="card-header">
                        <p class="card-header-title">相关结果</p>
                    </div>
                    <div class="card-content">
                        <div class="media">
                            <div class="media-left">
                                <figure class="image is-64x64">
                                    <img src="https://bulma.io/images/placeholders/128x128.png" alt="">
                                </figure>
                            </div>
                            <div class="media-content">
                                <p>
                                    <strong>线程内上下文切换</strong>
                                    <span class="tag is-gray">专栏</span></p>
                                <p>
                                    1.6K 关注 | 12 篇文章
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <p class="card-header-title">知乎热搜</p>
                    </div>
                    <div class="card-content">
                        <ul class="lh-20">
                            <li><a href="#">演员的诞生第十期</a><i class="fa fa-fire"></i></li>
                            <li><a href="#">北航陈小武</a><i class="fa fa-fire"></i></li>
                            <li><a href="#">微信跳一跳</a><i class="fa fa-fire"></i></li>
                            <li><a href="#">解忧杂货店</a></li>
                            <li><a href="#">前任3</a></li>
                            <li><a href="#">妖猫传</a></li>
                            <li><a href="#">琅琊榜2</a></li>
                            <li><a href="#">刘昊然</a></li>
                            <li><a href="#">黄轩</a></li>
                            <li><a href="#">比特币</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/layui/layui.js" charset="utf-8"></script>
    <!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
    <script>
        layui.use(['form', 'laydate'], function () {
            var form = layui.form
                , $ = layui.jquery
                , layer = layui.layer
                , laydate = layui.laydate;

            //日期
            laydate.render({
                elem: '#date',
                type: "datetime"
            });

            //创建一个编辑器
            // var editIndex = layedit.build('LAY_demo_editor');

            //监听提交
            form.on('submit(demo1)', function (data) {
                // layer.alert(JSON.stringify(data.field), {
                //     title: '最终的提交信息'
                // });
                $.ajax({
                    url: "/invest/add_post",
                    type: "POST",
                    dataType: "JSON",
                    data: JSON.stringify(data.field),
                    success: function (res) {
                        if (res.code == 0) {
                            // alert(JSON.stringify(res));
                            window.location.href = "/";
                        } else {
                            alert(res.msg);
                        }
                        // alert(JSON.stringify(res));
                        return false;
                    }
                });
                return false;
            });

            //表单初始赋值
            // form.val('example', {
            //     "username": "贤心" // "name": "value"
            //     ,"password": "123456"
            //     ,"interest": 1
            //     ,"like[write]": true //复选框选中状态
            //     ,"close": true //开关状态
            //     ,"sex": "1"
            //     ,"desc": "我爱 layui"
            // })


        });
    </script>

</body>
</html>